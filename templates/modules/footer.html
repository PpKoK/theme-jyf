<footer th:fragment="footer" class="footer">
  <div class="container">
    <div class="footer-content">
      <!-- 社交图标 -->
      <th:block th:if="${theme.config.footer.show_social_icons != null && theme.config.footer.show_social_icons}">
        <div th:if="${theme.config.footer.social_media != null && not #lists.isEmpty(theme.config.footer.social_media)}" class="social-icons">
          <a th:each="social : ${theme.config.footer.social_media}"
             th:if="${social.iconify != null && !#strings.isEmpty(social.iconify)}"
             th:href="${social.url}"
             th:title="${social.name}"
             th:aria-label="${social.name}"
             target="_blank"
             rel="noopener noreferrer"
             class="social-icon">
            <th:block th:utext="${social.iconify.value}"></th:block>
          </a>
        </div>
      </th:block>
      
      <!-- 友情链接（每5秒随机切换5个） -->
      <th:block th:if="${pluginFinder.available('PluginLinks')}">
        <th:block th:with="allGroups = ${linkFinder.groupBy()}">
          <div th:if="${not #lists.isEmpty(allGroups)}" class="friend-links">
            <span th:text="#{common.friendLinks}">友情链接：</span>
            <span id="friend-links-container"></span>
            
            <!-- 所有友链数据（隐藏） -->
            <script th:inline="javascript">
              window.allFriendLinks = [
                /*[# th:each="group : ${allGroups}"]*/
                  /*[# th:each="link : ${group.links}"]*/
                  {
                    name: /*[[${link.spec.displayName}]]*/ '',
                    url: /*[[${link.spec.url}]]*/ ''
                  },
                  /*[/]*/
                /*[/]*/
              ];
            </script>
          </div>
        </th:block>
      </th:block>
      
      <!-- 页脚信息 -->
      <div class="footer-info">
        <p>
          <span>© </span>
          <th:block th:if="${theme.config.footer.copyright_start_year != null && !#strings.isEmpty(theme.config.footer.copyright_start_year)}">
            <span th:text="${theme.config.footer.copyright_start_year}">2024</span>
            <span>-</span>
          </th:block>
          <span th:text="${#temporals.year(#temporals.createNow())}">2024</span>
          <span> </span>
          <span th:text="${theme.config.footer.copyright_owner ?: 'Your Name'}">Your Name</span>
          <span> All Rights Reserved.</span>
          <th:block th:if="${theme.config.footer.show_powered == null || theme.config.footer.show_powered}">
          <br>
            <span th:text="#{footer.poweredBy}">由 Halo 强力驱动</span>
            <span> · </span>
            <span th:text="#{footer.theme}">主题</span>
            <a th:href="${theme.spec.homepage}" target="_blank" rel="noopener" th:text="${theme.spec.displayName}">Jyf</a>
            <span th:text="#{footer.version}">版本</span>
            <span th:text="${theme.spec.version}"></span>
          </th:block>
        </p>
        
        <!-- 页面加载速度 -->
        <p class="page-load-speed">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>
          <span th:text="#{footer.loadSpeed}">加载速度:</span>
          <span> </span>
          <span id="page-load-time" th:text="#{footer.calculating}">计算中...</span>
        </p>
        
        <!-- 备案信息 -->
        <p th:if="${(theme.config.footer.icp_text != null && !#strings.isEmpty(theme.config.footer.icp_text)) || (theme.config.footer.police_text != null && !#strings.isEmpty(theme.config.footer.police_text))}">
          <a
            th:if="${theme.config.footer.icp_text != null && !#strings.isEmpty(theme.config.footer.icp_text)}"
            th:href="${theme.config.footer.icp_link ?: 'https://beian.miit.gov.cn/'}"
            target="_blank"
            rel="noopener"
            th:text="${theme.config.footer.icp_text}"
          ></a>
          <span th:if="${(theme.config.footer.icp_text != null && !#strings.isEmpty(theme.config.footer.icp_text)) && (theme.config.footer.police_text != null && !#strings.isEmpty(theme.config.footer.police_text))}"> | </span>
          <a
            th:if="${theme.config.footer.police_text != null && !#strings.isEmpty(theme.config.footer.police_text)}"
            th:href="${theme.config.footer.police_link ?: 'https://beian.mps.gov.cn/'}"
            target="_blank"
            rel="noopener"
            th:text="${theme.config.footer.police_text}"
          ></a>
        </p>
      </div>
    </div>
  </div>
</footer>